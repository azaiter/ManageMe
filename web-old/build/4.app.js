webpackJsonp([4],{70:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e,t,a){for(var n=!0;n;){var r=e,l=t,o=a;n=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,l);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(r);if(null===s)return;e=s,t=l,a=o,n=!0,u=s=void 0}},i=a(1),s=n(i),c=a(37),d=(n(c),a(26)),f=a(134),m=n(f),h=a(133),p=n(h),v=a(29),b=a(38),y=a(27),g=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={projShow:!1,teamShow:!1,teams:[]},this.getTeams()}return l(t,e),o(t,[{key:"getTeams",value:function(){var e=this;(0,b.getTeams)((0,y.getLocalToken)()).then(function(t){var a=t[0],n=t[1];return 200!=n?void e.setState({creationError:"No Teams!"}):void e.setState({teams:a})})}},{key:"handleClose",value:function(e){switch(e){case"team":this.setState({teamShow:!1});break;case"proj":this.setState({projShow:!1})}}},{key:"handleShow",value:function(e){switch(e){case"team":this.setState({teamShow:!0});break;case"proj":this.setState({projShow:!0})}}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(d.Link,{to:"/dashboard/reports",className:"pull-right btn btn-primary btn-outline btn-rounded"},"View Reports"),s.default.createElement("button",{className:"pull-right btn btn-primary btn-outline btn-rounded",onClick:this.handleShow.bind(this,"team")},"Create Team"),s.default.createElement("button",{className:"pull-right btn btn-primary btn-outline btn-rounded",onClick:this.handleShow.bind(this,"proj")},"Create Project"),s.default.createElement(v.Modal,{show:this.state.teamShow,onHide:this.handleClose.bind(this,"team")},s.default.createElement(v.Modal.Header,{closeButton:!0},s.default.createElement(v.Modal.Title,null,"Create Team")),s.default.createElement(v.Modal.Body,null,s.default.createElement(m.default,null)),s.default.createElement(v.Modal.Footer,null,s.default.createElement(v.Button,{onClick:this.handleClose.bind(this,"team")},"Close"))),s.default.createElement(v.Modal,{show:this.state.projShow,onHide:this.handleClose.bind(this,"proj")},s.default.createElement(v.Modal.Header,{closeButton:!0},s.default.createElement(v.Modal.Title,null,"Create Project")),s.default.createElement(v.Modal.Body,null,s.default.createElement(p.default,{data:this.state.teams})),s.default.createElement(v.Modal.Footer,null,s.default.createElement(v.Button,{onClick:this.handleClose.bind(this,"proj")},"Close"))))}}]),t}(s.default.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},791:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,l=t,o=a;n=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,l);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(r);if(null===s)return;e=s,t=l,a=o,n=!0,u=s=void 0}},s=a(1),c=n(s),d=a(26),f=(n(d),a(29),a(77),a(37)),m=(n(f),a(78)),h=(n(m),a(38)),p=a(27),v=function(e){function t(e){var a=this;r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleRequirementChange=function(e){return function(t){var n=a.state.requirements.map(function(a,n){return e!==n?a:Number.isInteger(parseInt(t.target.value))?o({},a,{reqTime:t.target.value}):o({},a,{reqName:t.target.value})});a.setState({requirements:n})}},this.handleAddRequirement=function(){a.setState({requirements:a.state.requirements.concat([{reqName:"",reqTime:0}])})},this.handleRemoveRequirement=function(e){return function(){a.setState({requirements:a.state.requirements.filter(function(t,a){return e!==a})})}},console.log(e),this.state={name:e.data.name,desc:e.data.desc,user:"",name_error_text:null,desc_error_text:null,creationError:null,disabled:!0,reqName:"",reqTime:"",requirements:[{reqName:"",reqTime:0}]}}return l(t,e),u(t,[{key:"isDisabled",value:function(){var e=!1,t=!1;this.state.name.length>0?e=!0:(e=!1,this.setState({name_error_text:"Please enter a project name"})),this.state.desc.length>0?t=!0:(t=!1,this.setState({desc_error_text:"Please enter a project description"})),e&&t?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"changeValue",value:function(e,t){var a=this,n=e.target.value,r={};r[t]=n,this.setState(r,function(){a.isDisabled()})}},{key:"handleProjUpdate",value:function(e){var t=this;e.preventDefault();var a=(0,p.getLocalToken)();if(a)return(0,h.updateProject)(a,this.props.data.uid,this.state.name,this.state.desc).then(function(e){var a=(e[0],e[1]);return 200!=a?void t.setState({creationError:"Cannot Update"}):(console.log("I AM WORKING"),void window.location.reload())}).catch(function(e){console.log("Error:",e)}),!1}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement("form",{role:"form",onSubmit:this.handleProjUpdate.bind(this),className:"ng-pristine ng-valid"},c.default.createElement("div",{className:"form-content"},c.default.createElement("div",{className:"form-group"},c.default.createElement("input",{type:"text",className:"form-control",value:this.state.name,errorText:this.state.name_error_text,onChange:function(t){return e.changeValue(t,"name")}})),c.default.createElement("div",{className:"form-group"},c.default.createElement("textarea",{rows:"4",className:"form-control",value:this.state.desc,errorText:this.state.desc_error_text,onChange:function(t){return e.changeValue(t,"desc")}})),this.state.requirements.map(function(t,a){return c.default.createElement("div",{className:"requirement form-inline"},c.default.createElement("input",{type:"text",placeholder:"Requirement #"+(a+1)+" name",value:t.name,onChange:e.handleRequirementChange(a),className:"form-control"})," ",c.default.createElement("input",{type:"number",placeholder:"Time",value:t.time,onChange:e.handleRequirementChange(a),className:"form-control"})," ",c.default.createElement("button",{type:"button",onClick:e.handleRemoveRequirement(a),className:"btn btn-danger btn-small"},"-"))}),c.default.createElement("button",{type:"button",onClick:this.handleAddRequirement,className:"btn btn-warning btn-small"},"+"),c.default.createElement("p",{style:{color:"red"}},this.state.creationError)),c.default.createElement("button",{className:"btn btn-success",onClick:function(t){return e.handleProjUpdate(t)}},"Submit")))}}]),t}(c.default.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},792:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e,t,a){for(var n=!0;n;){var r=e,l=t,o=a;n=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,l);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(r);if(null===s)return;e=s,t=l,a=o,n=!0,u=s=void 0}},i=a(1),s=n(i),c=a(26),d=a(29),f=a(70),m=n(f),h=a(27),p=a(38),v=a(791),b=n(v),y=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={error:"",projects:"",tok:(0,h.getLocalToken)(),uids:{},shows:{},teams:[]},this.getProjs()}return l(t,e),o(t,[{key:"getProjs",value:function(){var e=this;(0,p.getTeams)(this.state.tok).then(function(t){var a=t[0],n=t[1];if(200!==n)return void e.setState({error:a.message});var r=a.reverse();e.setState({teams:r})}),(0,p.getProjects)(this.state.tok).then(function(t){var a=t[0],n=t[1];if(200!==n)return void e.setState({error:a.message});var r=a.reverse();r.map(function(t){e.getHours(t.uid)}),e.setState({projects:r})})}},{key:"deleteProj",value:function(e){var t=this;(0,p.deleteProject)(this.state.tok,e).then(function(a){var n=a[0],r=a[1];if(200!==r)return void t.setState({error:n.message});var l=t.state.projects.filter(function(t){return t.uid!==e});t.setState({projects:l})})}},{key:"deleteT",value:function(e){var t=this;(0,p.deleteTeam)(this.state.tok,e).then(function(e){var a=e[0],n=e[1];return 200!==n?void t.setState({error:a.message}):void(0,p.getTeams)(t.state.tok).then(function(e){var n=e[0].reverse(),r=e[1];return 200!==r?void t.setState({error:a.message}):void t.setState({teams:n})})})}},{key:"getHours",value:function(e){return regeneratorRuntime.async(function(t){for(var a=this;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.getProjectHours)((0,h.getLocalToken)(),e).then(function(t){var n=t[0],r=t[1];if(200===r){var l=a.state.uids;l[e]=n[0]["SUM(soft_cap)"]/n[1]["SUM(soft_cap)"]*100,a.setState({uids:l})}}).catch(function(e){console.log(e)}));case 1:case"end":return t.stop()}},null,this)}},{key:"handleClose",value:function(e){var t=this.state.shows;t[e]=!1,this.setState({shows:t})}},{key:"handleShow",value:function(e){var t=this.state.shows;t[e]=!0,this.setState({show:t})}},{key:"render",value:function(){var e=this;if(this.state.projects.length>0){var t=this.state.projects.map(function(t){var a="/dashboard/project?id="+t.uid+"&name="+t.name+"&desc="+t.desc+"&created="+t.created;return s.default.createElement("div",null,s.default.createElement("div",{className:"btn-toolbar pull-right"},s.default.createElement("button",{className:"btn btn-info",onClick:e.handleShow.bind(e,t.uid)},"Update Project"),s.default.createElement(d.Modal,{show:e.state.shows[t.uid],onHide:e.handleClose.bind(e,t.uid)},s.default.createElement(d.Modal.Header,{closeButton:!0},s.default.createElement(d.Modal.Title,null,"Update Team")),s.default.createElement(d.Modal.Body,null,s.default.createElement(b.default,{data:t})),s.default.createElement(d.Modal.Footer,null,s.default.createElement(d.Button,{onClick:e.handleClose.bind(e,t.uid)},"Close"))),s.default.createElement("button",{className:"btn btn-danger",onClick:e.deleteProj.bind(e,t.uid)},"Delete Project")),s.default.createElement(c.Link,{to:a},s.default.createElement("h1",null,t.name)," "),"Description: ",t.desc,s.default.createElement("br",null),"Created: ",t.created,s.default.createElement("br",null)," ",s.default.createElement("br",null),s.default.createElement("div",{className:"progress"},s.default.createElement("div",{className:"progress-bar progress-bar-primary",role:"progressbar","aria-valuenow":"40","aria-valuemin":"0","aria-valuemax":"100",style:{width:e.state.uids[t.uid]+"%"}},e.state.uids[t.uid],"% Complete (on track)")),s.default.createElement("hr",null))}),a=this.state.teams.map(function(t){if(t.name){var a="/dashboard/teams?id="+t.uid+"&name="+t.name+"&desc="+t.desc;return s.default.createElement("div",null,s.default.createElement("div",{className:"btn-toolbar pull-right"},s.default.createElement("button",{className:"btn btn-danger",onClick:e.deleteT.bind(e,t.uid)},"Delete Team")),s.default.createElement(c.Link,{to:a},s.default.createElement("h1",null,t.name)," "),"Description: ",t.desc,s.default.createElement("br",null))}});return s.default.createElement("div",{className:"overview-page",key:"overview"},s.default.createElement(m.default,null),s.default.createElement("h2",null,"My Projects:"),s.default.createElement(d.Jumbotron,null,t),s.default.createElement("h2",null,"My Teams:"),s.default.createElement(d.Jumbotron,null,a))}var n=this.state.teams.map(function(t){if(t.name){var a="/dashboard/teams?id="+t.uid+"&name="+t.name+"&desc="+t.desc;return s.default.createElement("div",null,s.default.createElement("div",{className:"btn-toolbar pull-right"},s.default.createElement("button",{className:"btn btn-danger",onClick:e.deleteT.bind(e,t.uid)},"Delete Team")),s.default.createElement(c.Link,{to:a},s.default.createElement("h1",null,t.name)," "),"Description: ",t.desc,s.default.createElement("br",null))}});return s.default.createElement("div",{className:"overview-page",key:"overview"},s.default.createElement(m.default,null),s.default.createElement("h2",null,"My Projects:"),s.default.createElement(d.Jumbotron,null,"No Projects Found"),s.default.createElement("h2",null,"My Teams:"),s.default.createElement(d.Jumbotron,null,n.length>1?n:"No Teams Found"))}}]),t}(s.default.Component);t.default=y,e.exports=t.default}).call(this)}finally{}}});